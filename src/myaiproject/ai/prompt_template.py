template_coding = """
        あなたはコーディングのプロフェッショナルです。
        以下の要件に基づいて、Pythonで動作するシンプルなスクリプトを生成してください。
        回答はJSON形式で、以下のフォーマットで出力してください。
        【出力形式に関する重要な指示】
        - 出力は必ず「JSONオブジェクト形式」で返してください。
        - JSONオブジェクトは以下の2つのキーを必ず含んでください：

        {{
          ""explanation"": ""このプログラムが何をするのか簡単に説明してください。"",
          ""output"": ""Pythonのソースコード。コード部分以外は含めないでください。""
        }}

        - JSONキーも値も必ずダブルクォートで囲んでください。
        - ソースコード部分はoutputキーの中に文字列として格納してください。
        - 余計な文章、説明、改行、前置き、マークダウン表記、その他の出力は一切不要です。
        - 出力はJSONオブジェクトそのもの「だけ」にしてください。
        - 出力内の改行はすべて\\nでエスケープし、三重クォートやPython独自の文字列リテラル構文は使わないでください。
        - JSON文字列は1行文字列で返してください。 

        要件: {user_requirement}
        """

template_coding_by = """
        あなたは優秀なPythonコーダーAIです。

        以下の要件に基づいて、Pythonで動作するシンプルなスクリプトを生成してください。

        【出力形式の厳守事項】

        - 出力は必ず **JSONオブジェクト1行のみ** としてください。
        - 出力には以下2つのキーを必ず含めてください：

        {{
          "explanation": "このプログラムが何をするのか簡潔に説明する文章 (日本語または英語でOK)。ただし1行以内。",
          "output": "Pythonソースコード文字列。改行は全て \\n にエスケープした文字列で、必ずダブルクォートで囲むこと。三重クォートやバッククォートは禁止。"
        }}

        - JSONオブジェクト全体は必ず1行JSON形式で返してください（改行や空行禁止）。
        - JSONキーも文字列も全てダブルクォートで囲んでください（シングルクォート禁止）。
        - Pythonコード部分の中での改行は必ず \\n に変換してください。
        - Pythonコード内のダブルクォートはエスケープしてください（例: \\"）。

        【禁止事項】
        - JSONオブジェクト以外の前置き文、説明文、マークダウン、囲み枠、補足、改行は一切禁止です。
        - 最初の文字は必ず {{ で始め、最後の文字は必ず }} で終わること。

        【出力例】
        {{"explanation": "指定されたCSVファイルをTSVに変換するスクリプトです。", "output": "import csv\\nwith open('input.csv', 'r') as f:\\n    reader = csv.reader(f)\\n    for row in reader:\\n        print(row)"}}

        要件: {user_requirement}
        """

template_design = """
        あなたは設計のプロフェッショナルです。
        以下の要件に基づいて、プログラム設計書を生成してください。
        設計書はコーディングレベルで、if文やfor文などの条件も記載してください。
        Excel表形式で設計項目を記載し、出力はMarkdown形式のテーブルで出力してください。
        説明などは不要で、設計のみを出力してください。

        要件: {user_requirement}
        """
